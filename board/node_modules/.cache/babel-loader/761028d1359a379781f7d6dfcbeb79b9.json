{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\react\\uAC8C\\uC2DC\\uD310\\\\board\\\\src\\\\CalendarForm.js\";\nimport React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nconst headers = {\n  withCredentials: true\n};\nexport default class CalendarForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      weekendsVisible: true,\n      currentEvents: [],\n      events: []\n    };\n\n    this.handleDateSelect = selectInfo => {\n      let title = prompt(\"새로운 일정 내용을 입력하세요.\");\n      let calendarApi = selectInfo.view.calendar;\n      calendarApi.unselect(); // clear date selection\n      //event 추가\n\n      if (title) {\n        const send_param = {\n          writer: window.sessionStorage.getItem(\"login_id\"),\n          title,\n          start: selectInfo.startStr,\n          end: selectInfo.endStr,\n          allDay: selectInfo.allDay\n        };\n        axios.post(\"http://localhost:8080/calendar/add\", send_param).then(returnData => {\n          if (returnData.data.message) {\n            alert(\"일정에 추가되었습니다!\");\n            calendarApi.addEvent(send_param);\n          } else {\n            alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\n          }\n        }).catch(err => {\n          alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\n        });\n      }\n    };\n\n    this.handleEventClick = clickInfo => {\n      if (window.confirm(`'${clickInfo.event.title}' 일정을 삭제하시겠습니까?`)) {\n        const send_param = {\n          headers,\n          _id: clickInfo.event._def.extendedProps._id\n        };\n        axios.post(\"http://localhost:8080/calendar/delete\", send_param).then(returnData => {\n          if (returnData.data.message) {\n            alert(\"삭제되었습니다.\");\n            clickInfo.event.remove();\n          }\n        }).catch(err => {\n          alert(\"일정 삭제에 실패했습니다. 다시 시도해주세요.\");\n        });\n      }\n    };\n\n    this.handleEvents = events => {\n      this.setState({\n        currentEvents: events\n      });\n      let arr = [];\n\n      if (this.state.currentEvents != []) {\n        for (var i = 0; i < events.length; i++) {\n          if (events[i]._instance.range.start != this.state.currEvents[i]._instance.range.start || events[i]._instance.range.end != this.state.currEvents[i]._instance.range.end) {\n            arr.push(events[i]);\n          }\n        }\n\n        console.log(arr);\n      }\n    };\n  }\n\n  componentWillMount() {\n    const send_param = {\n      headers,\n      _id: window.sessionStorage.getItem(\"login_id\")\n    };\n    axios.post(\"http://localhost:8080/calendar/getcal\", send_param).then(returnData => {\n      if (returnData.data.message) {\n        this.setState({\n          events: returnData.data.calendar\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    const CalendarStyle = {\n      width: \"80%\",\n      textAlign: \"Center\",\n      margin: \"0 auto\",\n      marginTop: 20,\n      listStyle: \"none\"\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"demo-app\",\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [\"Select dates and you will be prompted to create a new event \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 73\n          }, this), \"Drag, drop, and resize events \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 43\n          }, this), \"Click an event to delete it\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"demo-app-main\",\n        style: CalendarStyle,\n        children: /*#__PURE__*/_jsxDEV(FullCalendar, {\n          plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n          headerToolbar: {\n            left: \"prev,next today\",\n            center: \"title\",\n            right: \"dayGridMonth,timeGridWeek,timeGridDay\"\n          },\n          initialView: \"dayGridMonth\",\n          editable: true,\n          selectable: true,\n          selectMirror: true,\n          dayMaxEvents: true,\n          events: this.state.events,\n          select: this.handleDateSelect,\n          eventContent: renderEventContent // custom render function\n          ,\n          eventClick: this.handleEventClick,\n          eventsSet: this.handleEvents // called after events are initialized/added/changed/removed\n\n          /* you can update a remote database when these fire:\r\n          eventAdd={function(){}}\r\n          eventChange={function(){}}\r\n          eventRemove={function(){}}\r\n          */\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nfunction renderEventContent(eventInfo) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n      children: eventInfo.timeText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      children: eventInfo.event.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["C:/Users/user/Desktop/react게시판/board/src/CalendarForm.js"],"names":["React","Card","axios","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","headers","withCredentials","CalendarForm","Component","state","weekendsVisible","currentEvents","events","handleDateSelect","selectInfo","title","prompt","calendarApi","view","calendar","unselect","send_param","writer","window","sessionStorage","getItem","start","startStr","end","endStr","allDay","post","then","returnData","data","message","alert","addEvent","catch","err","handleEventClick","clickInfo","confirm","event","_id","_def","extendedProps","remove","handleEvents","setState","arr","i","length","_instance","range","currEvents","push","console","log","componentWillMount","render","CalendarStyle","width","textAlign","margin","marginTop","listStyle","left","center","right","renderEventContent","eventInfo","timeText"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport FullCalendar from \"@fullcalendar/react\";\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nconst headers = { withCredentials: true };\r\n\r\nexport default class CalendarForm extends React.Component {\r\n  state = {\r\n    weekendsVisible: true,\r\n    currentEvents: [],\r\n    events: [],\r\n  };\r\n\r\n  componentWillMount() {\r\n    const send_param = {\r\n      headers,\r\n      _id: window.sessionStorage.getItem(\"login_id\"),\r\n    };\r\n    axios\r\n      .post(\"http://localhost:8080/calendar/getcal\", send_param)\r\n      .then((returnData) => {\r\n        if (returnData.data.message) {\r\n          this.setState({ events: returnData.data.calendar });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  render() {\r\n    const CalendarStyle = {\r\n      width: \"80%\",\r\n      textAlign: \"Center\",\r\n      margin: \"0 auto\",\r\n      marginTop: 20,\r\n      listStyle: \"none\",\r\n    };\r\n    return (\r\n      <div className=\"demo-app\" style={{ textAlign: \"center\" }}>\r\n        <Card>\r\n          <Card.Body>\r\n            Select dates and you will be prompted to create a new event <br />\r\n            Drag, drop, and resize events <br />\r\n            Click an event to delete it\r\n          </Card.Body>\r\n        </Card>\r\n        <div className=\"demo-app-main\" style={CalendarStyle}>\r\n          <FullCalendar\r\n            plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\r\n            headerToolbar={{\r\n              left: \"prev,next today\",\r\n              center: \"title\",\r\n              right: \"dayGridMonth,timeGridWeek,timeGridDay\",\r\n            }}\r\n            initialView=\"dayGridMonth\"\r\n            editable={true}\r\n            selectable={true}\r\n            selectMirror={true}\r\n            dayMaxEvents={true}\r\n            events={this.state.events}\r\n            select={this.handleDateSelect}\r\n            eventContent={renderEventContent} // custom render function\r\n            eventClick={this.handleEventClick}\r\n            eventsSet={this.handleEvents} // called after events are initialized/added/changed/removed\r\n            /* you can update a remote database when these fire:\r\n            eventAdd={function(){}}\r\n            eventChange={function(){}}\r\n            eventRemove={function(){}}\r\n            */\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleDateSelect = (selectInfo) => {\r\n    let title = prompt(\"새로운 일정 내용을 입력하세요.\");\r\n    let calendarApi = selectInfo.view.calendar;\r\n\r\n    calendarApi.unselect(); // clear date selection\r\n\r\n    //event 추가\r\n    if (title) {\r\n      const send_param = {\r\n        writer: window.sessionStorage.getItem(\"login_id\"),\r\n        title,\r\n        start: selectInfo.startStr,\r\n        end: selectInfo.endStr,\r\n        allDay: selectInfo.allDay,\r\n      };\r\n\r\n      axios\r\n        .post(\"http://localhost:8080/calendar/add\", send_param)\r\n        .then((returnData) => {\r\n          if (returnData.data.message) {\r\n            alert(\"일정에 추가되었습니다!\");\r\n            calendarApi.addEvent(send_param);\r\n          } else {\r\n            alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\r\n        });\r\n    }\r\n  };\r\n\r\n  handleEventClick = (clickInfo) => {\r\n    if (window.confirm(`'${clickInfo.event.title}' 일정을 삭제하시겠습니까?`)) {\r\n      const send_param = {\r\n        headers,\r\n        _id: clickInfo.event._def.extendedProps._id,\r\n      };\r\n\r\n      axios\r\n        .post(\"http://localhost:8080/calendar/delete\", send_param)\r\n        .then((returnData) => {\r\n          if (returnData.data.message) {\r\n            alert(\"삭제되었습니다.\");\r\n            clickInfo.event.remove();\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(\"일정 삭제에 실패했습니다. 다시 시도해주세요.\");\r\n        });\r\n    }\r\n  };\r\n\r\n  handleEvents = (events) => {\r\n    this.setState({\r\n      currentEvents: events,\r\n    });\r\n    let arr = [];\r\n\r\n    if (this.state.currentEvents != []) {\r\n      for (var i = 0; i < events.length; i++) {\r\n        if (\r\n          events[i]._instance.range.start !=\r\n            this.state.currEvents[i]._instance.range.start ||\r\n          events[i]._instance.range.end !=\r\n            this.state.currEvents[i]._instance.range.end\r\n        ) {\r\n          arr.push(events[i]);\r\n        }\r\n      }\r\n      console.log(arr);\r\n    }\r\n  };\r\n}\r\n\r\nfunction renderEventContent(eventInfo) {\r\n  return (\r\n    <>\r\n      <b>{eventInfo.timeText}</b>\r\n      <i>{eventInfo.event.title}</i>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}