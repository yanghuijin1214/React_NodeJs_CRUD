{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\react\\uAC8C\\uC2DC\\uD310\\\\board\\\\src\\\\CalendarForm.js\";\nimport React from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport FullCalendar, { formatDate } from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { INITIAL_EVENTS, createEventId } from \"./event-utils\";\nconst headers = {\n  withCredentials: true\n};\nexport default class CalendarForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      weekendsVisible: true,\n      currentEvents: [],\n      events: [],\n      eventId: 0\n    };\n\n    this.handleDateSelect = selectInfo => {\n      let title = prompt(\"새로운 일정 내용을 입력하세요.\");\n      let calendarApi = selectInfo.view.calendar;\n      calendarApi.unselect(); // clear date selection\n\n      function createEventId() {\n        return String(this.state.events.length);\n      } //event 추가\n\n\n      if (title) {\n        const send_param = {\n          writer: window.sessionStorage.getItem(\"login_id\"),\n          id: createEventId(),\n          title,\n          start: selectInfo.startStr,\n          end: selectInfo.endStr,\n          allDay: selectInfo.allDay\n        };\n        axios.post(\"http://localhost:8080/calendar/add\", send_param).then(returnData => {\n          if (returnData.data.message) {\n            alert(\"일정에 추가되었습니다!\");\n            calendarApi.addEvent(send_param);\n          } else {\n            alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\n          }\n        }).catch(err => {\n          alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\n        });\n        console.log(send_param);\n      }\n    };\n\n    this.handleEventClick = clickInfo => {\n      if (window.confirm(`'${clickInfo.event.title}' 일정을 삭제하시겠습니까?`)) {\n        const send_param = {\n          headers,\n          _id: clickInfo.event._def.extendedProps._id\n        };\n        axios.post(\"http://localhost:8080/calendar/delete\", send_param).then(returnData => {\n          if (returnData.data.message) {\n            alert(\"삭제되었습니다.\");\n            clickInfo.event.remove();\n          }\n        }).catch(err => {\n          alert(\"일정 삭제에 실패했습니다. 다시 시도해주세요.\");\n        });\n      }\n    };\n\n    this.handleEvents = events => {\n      this.setState({\n        currentEvents: events\n      });\n    };\n  }\n\n  componentWillMount() {\n    const send_param = {\n      headers,\n      _id: window.sessionStorage.getItem(\"login_id\")\n    };\n    axios.post(\"http://localhost:8080/calendar/getcal\", send_param).then(returnData => {\n      if (returnData.data.message) {\n        console.log(returnData.data.calendar);\n        this.setState({\n          events: returnData.data.calendar\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    const CalendarStyle = {\n      width: \"80%\",\n      textAlign: \"Center\",\n      margin: \"0 auto\",\n      marginTop: 20,\n      listStyle: \"none\"\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"demo-app\",\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [\"Select dates and you will be prompted to create a new event \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 73\n          }, this), \"Drag, drop, and resize events \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 43\n          }, this), \"Click an event to delete it\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"demo-app-main\",\n        style: CalendarStyle,\n        children: /*#__PURE__*/_jsxDEV(FullCalendar, {\n          plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n          headerToolbar: {\n            left: \"prev,next today\",\n            center: \"title\",\n            right: \"dayGridMonth,timeGridWeek,timeGridDay\"\n          },\n          initialView: \"dayGridMonth\",\n          editable: true,\n          selectable: true,\n          selectMirror: true,\n          dayMaxEvents: true,\n          events: this.state.events,\n          select: this.handleDateSelect,\n          eventContent: renderEventContent // custom render function\n          ,\n          eventClick: this.handleEventClick,\n          eventsSet: this.handleEvents // called after events are initialized/added/changed/removed\n\n          /* you can update a remote database when these fire:\r\n          eventAdd={function(){}}\r\n          eventChange={function(){}}\r\n          eventRemove={function(){}}\r\n          */\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nfunction renderEventContent(eventInfo) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n      children: eventInfo.timeText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      children: eventInfo.event.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n} // function renderSidebarEvent(event) {\n//   return (\n//     <li key={event.id}>\n//       <b>\n//         {formatDate(event.start, {\n//           year: \"numeric\",\n//           month: \"short\",\n//           day: \"numeric\",\n//         })}\n//       </b>\n//       <i>{event.title}</i>\n//     </li>\n//   );\n// }","map":{"version":3,"sources":["C:/Users/user/Desktop/react게시판/board/src/CalendarForm.js"],"names":["React","Card","axios","FullCalendar","formatDate","dayGridPlugin","timeGridPlugin","interactionPlugin","INITIAL_EVENTS","createEventId","headers","withCredentials","CalendarForm","Component","state","weekendsVisible","currentEvents","events","eventId","handleDateSelect","selectInfo","title","prompt","calendarApi","view","calendar","unselect","String","length","send_param","writer","window","sessionStorage","getItem","id","start","startStr","end","endStr","allDay","post","then","returnData","data","message","alert","addEvent","catch","err","console","log","handleEventClick","clickInfo","confirm","event","_id","_def","extendedProps","remove","handleEvents","setState","componentWillMount","render","CalendarStyle","width","textAlign","margin","marginTop","listStyle","left","center","right","renderEventContent","eventInfo","timeText"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport FullCalendar, { formatDate } from \"@fullcalendar/react\";\r\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\r\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\r\nimport interactionPlugin from \"@fullcalendar/interaction\";\r\nimport { INITIAL_EVENTS, createEventId } from \"./event-utils\";\r\nconst headers = { withCredentials: true };\r\n\r\nexport default class CalendarForm extends React.Component {\r\n  state = {\r\n    weekendsVisible: true,\r\n    currentEvents: [],\r\n    events: [],\r\n    eventId: 0,\r\n  };\r\n\r\n  componentWillMount() {\r\n    const send_param = {\r\n      headers,\r\n      _id: window.sessionStorage.getItem(\"login_id\"),\r\n    };\r\n    axios\r\n      .post(\"http://localhost:8080/calendar/getcal\", send_param)\r\n      .then((returnData) => {\r\n        if (returnData.data.message) {\r\n          console.log(returnData.data.calendar);\r\n          this.setState({ events: returnData.data.calendar });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  render() {\r\n    const CalendarStyle = {\r\n      width: \"80%\",\r\n      textAlign: \"Center\",\r\n      margin: \"0 auto\",\r\n      marginTop: 20,\r\n      listStyle: \"none\",\r\n    };\r\n    return (\r\n      <div className=\"demo-app\" style={{ textAlign: \"center\" }}>\r\n        <Card>\r\n          <Card.Body>\r\n            Select dates and you will be prompted to create a new event <br />\r\n            Drag, drop, and resize events <br />\r\n            Click an event to delete it\r\n          </Card.Body>\r\n        </Card>\r\n        <div className=\"demo-app-main\" style={CalendarStyle}>\r\n          <FullCalendar\r\n            plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\r\n            headerToolbar={{\r\n              left: \"prev,next today\",\r\n              center: \"title\",\r\n              right: \"dayGridMonth,timeGridWeek,timeGridDay\",\r\n            }}\r\n            initialView=\"dayGridMonth\"\r\n            editable={true}\r\n            selectable={true}\r\n            selectMirror={true}\r\n            dayMaxEvents={true}\r\n            events={this.state.events}\r\n            select={this.handleDateSelect}\r\n            eventContent={renderEventContent} // custom render function\r\n            eventClick={this.handleEventClick}\r\n            eventsSet={this.handleEvents} // called after events are initialized/added/changed/removed\r\n            /* you can update a remote database when these fire:\r\n            eventAdd={function(){}}\r\n            eventChange={function(){}}\r\n            eventRemove={function(){}}\r\n            */\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleDateSelect = (selectInfo) => {\r\n    let title = prompt(\"새로운 일정 내용을 입력하세요.\");\r\n    let calendarApi = selectInfo.view.calendar;\r\n\r\n    calendarApi.unselect(); // clear date selection\r\n\r\n    function createEventId() {\r\n      return String(this.state.events.length);\r\n    }\r\n\r\n    //event 추가\r\n    if (title) {\r\n      const send_param = {\r\n        writer: window.sessionStorage.getItem(\"login_id\"),\r\n        id: createEventId(),\r\n        title,\r\n        start: selectInfo.startStr,\r\n        end: selectInfo.endStr,\r\n        allDay: selectInfo.allDay,\r\n      };\r\n\r\n      axios\r\n        .post(\"http://localhost:8080/calendar/add\", send_param)\r\n        .then((returnData) => {\r\n          if (returnData.data.message) {\r\n            alert(\"일정에 추가되었습니다!\");\r\n            calendarApi.addEvent(send_param);\r\n          } else {\r\n            alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(\"일정 추가에 실패했습니다. 다시 시도해주세요.\");\r\n        });\r\n\r\n      console.log(send_param);\r\n    }\r\n  };\r\n\r\n  handleEventClick = (clickInfo) => {\r\n    if (window.confirm(`'${clickInfo.event.title}' 일정을 삭제하시겠습니까?`)) {\r\n      const send_param = {\r\n        headers,\r\n        _id: clickInfo.event._def.extendedProps._id,\r\n      };\r\n\r\n      axios\r\n        .post(\"http://localhost:8080/calendar/delete\", send_param)\r\n        .then((returnData) => {\r\n          if (returnData.data.message) {\r\n            alert(\"삭제되었습니다.\");\r\n            clickInfo.event.remove();\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(\"일정 삭제에 실패했습니다. 다시 시도해주세요.\");\r\n        });\r\n    }\r\n  };\r\n\r\n  handleEvents = (events) => {\r\n    this.setState({\r\n      currentEvents: events,\r\n    });\r\n  };\r\n}\r\n\r\nfunction renderEventContent(eventInfo) {\r\n  return (\r\n    <>\r\n      <b>{eventInfo.timeText}</b>\r\n      <i>{eventInfo.event.title}</i>\r\n    </>\r\n  );\r\n}\r\n\r\n// function renderSidebarEvent(event) {\r\n//   return (\r\n//     <li key={event.id}>\r\n//       <b>\r\n//         {formatDate(event.start, {\r\n//           year: \"numeric\",\r\n//           month: \"short\",\r\n//           day: \"numeric\",\r\n//         })}\r\n//       </b>\r\n//       <i>{event.title}</i>\r\n//     </li>\r\n//   );\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}